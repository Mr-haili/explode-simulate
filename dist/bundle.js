/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./src/main.ts");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./src/discretizate/color.ts":
/*!***********************************!*\
  !*** ./src/discretizate/color.ts ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Color = void 0;\nvar Color = /** @class */ (function () {\n    function Color(r, g, b, alpha) {\n        if (alpha === void 0) { alpha = 0; }\n        this.r = r;\n        this.g = g;\n        this.b = b;\n        // alpha可能是255，做下处理\n        if (alpha < 0) {\n            alpha = 0;\n        }\n        else if (alpha > 1) {\n            alpha = alpha / 255;\n        }\n        this.a = alpha;\n    }\n    return Color;\n}());\nexports.Color = Color;\n\n\n//# sourceURL=webpack:///./src/discretizate/color.ts?");

/***/ }),

/***/ "./src/discretizate/image-discretizate.ts":
/*!************************************************!*\
  !*** ./src/discretizate/image-discretizate.ts ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread = (this && this.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));\n    return ar;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.imageDiscretizate = exports.getImageData = void 0;\nvar particle_system_1 = __webpack_require__(/*! particle-system */ \"./src/particle-system/index.ts\");\nvar color_1 = __webpack_require__(/*! ./color */ \"./src/discretizate/color.ts\");\nvar utils_1 = __webpack_require__(/*! utils */ \"./src/utils.ts\");\n// 利用闭包做点肮脏的事情\nvar canvas = document.createElement('canvas');\nvar canvasStyle = canvas.style;\nObject.assign(canvasStyle, {\n    position: 'absolute',\n    left: '-1000px',\n    top: '-1000px',\n    'z-index': -1000\n});\ndocument.body.appendChild(canvas);\nvar ctx = canvas.getContext('2d');\n/**\n * 获取一个图片的像素数据\n */\nfunction getImageData(imageSrc) {\n    return __awaiter(this, void 0, void 0, function () {\n        var image, promise;\n        return __generator(this, function (_a) {\n            image = new Image();\n            image.src = imageSrc;\n            promise = new Promise(function (resolve, reject) {\n                image.onload = function () {\n                    var width = image.width, height = image.height;\n                    ctx.drawImage(image, 0, 0, width, height);\n                    var data = ctx.getImageData(0, 0, width, height);\n                    resolve(data);\n                };\n            });\n            return [2 /*return*/, promise];\n        });\n    });\n}\nexports.getImageData = getImageData;\n/**\n * 暂时是平台相关的\n * 我们利用cancas api将一个图片粒子化，\n * 获取到的particles组成图像尺寸1:1原图像\n *\n * @param imageSrc 图片的地址\n * @param unit 将图片分割的成unit个基础单位\n */\nfunction imageDiscretizate(imageSrc, unit) {\n    if (unit === void 0) { unit = 20; }\n    return __awaiter(this, void 0, void 0, function () {\n        var imageData, imgWidth, imgHeight, data, colors, colorMatrix, _a, unitWidth, unitHeight, size, particles, particle, colorRow, row, col;\n        return __generator(this, function (_b) {\n            switch (_b.label) {\n                case 0: return [4 /*yield*/, getImageData(imageSrc)];\n                case 1:\n                    imageData = _b.sent();\n                    imgWidth = imageData.width, imgHeight = imageData.height;\n                    data = Array.from(imageData.data);\n                    colors = utils_1.chunk(data, 4).map(function (rgbaArray) {\n                        return new (color_1.Color.bind.apply(color_1.Color, __spread([void 0], rgbaArray)))();\n                    });\n                    colorMatrix = utils_1.chunk(colors, imgWidth);\n                    _a = __read([imgWidth / unit, imgHeight / unit]\n                        .map(function (v) { return parseInt(v.toString()); }), 2), unitWidth = _a[0], unitHeight = _a[1];\n                    size = new particle_system_1.PVector2(unitWidth, unitHeight);\n                    particles = [];\n                    for (row = 0; row < imgHeight; row += unitHeight) {\n                        colorRow = colorMatrix[row];\n                        for (col = 0; col < imgWidth; col += unitWidth) {\n                            particle = new particle_system_1.Particle(new particle_system_1.PVector2(col, row), size);\n                            particle.color = colorRow[col];\n                            particles.push(particle);\n                        }\n                    }\n                    return [2 /*return*/, { particles: particles, width: imgWidth, height: imgHeight }];\n            }\n        });\n    });\n}\nexports.imageDiscretizate = imageDiscretizate;\n\n\n//# sourceURL=webpack:///./src/discretizate/image-discretizate.ts?");

/***/ }),

/***/ "./src/discretizate/index.ts":
/*!***********************************!*\
  !*** ./src/discretizate/index.ts ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Color = exports.imageDiscretizate = void 0;\nvar image_discretizate_1 = __webpack_require__(/*! ./image-discretizate */ \"./src/discretizate/image-discretizate.ts\");\nObject.defineProperty(exports, \"imageDiscretizate\", { enumerable: true, get: function () { return image_discretizate_1.imageDiscretizate; } });\nvar color_1 = __webpack_require__(/*! ./color */ \"./src/discretizate/color.ts\");\nObject.defineProperty(exports, \"Color\", { enumerable: true, get: function () { return color_1.Color; } });\n\n\n//# sourceURL=webpack:///./src/discretizate/index.ts?");

/***/ }),

/***/ "./src/image-src.ts":
/*!**************************!*\
  !*** ./src/image-src.ts ***!
  \**************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n// export const imageSrc = \"data:image/jpeg;base64,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\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.imageSrc = void 0;\n// export const imageSrc = \"data:image/jpeg;base64,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\";\nexports.imageSrc = \"data:image/jpeg;base64,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\";\n\n\n//# sourceURL=webpack:///./src/image-src.ts?");

/***/ }),

/***/ "./src/main.ts":
/*!*********************!*\
  !*** ./src/main.ts ***!
  \*********************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar particle_system_1 = __webpack_require__(/*! ./particle-system */ \"./src/particle-system/index.ts\");\nvar discretizate_1 = __webpack_require__(/*! ./discretizate */ \"./src/discretizate/index.ts\");\nvar image_src_1 = __webpack_require__(/*! ./image-src */ \"./src/image-src.ts\");\nfunction initSystem() {\n    return __awaiter(this, void 0, void 0, function () {\n        var _a, particles, width, height, layouter, render, particleSystem, pCenter, offsetPVector, particles_1, particles_1_1, particle, position, escapeDirection, acceleration;\n        var e_1, _b;\n        return __generator(this, function (_c) {\n            switch (_c.label) {\n                case 0: return [4 /*yield*/, discretizate_1.imageDiscretizate(image_src_1.imageSrc, 70)];\n                case 1:\n                    _a = _c.sent(), particles = _a.particles, width = _a.width, height = _a.height;\n                    layouter = new particle_system_1.ParticleLayouter();\n                    render = new particle_system_1.ParticleRender(\"#demo-quickStart\");\n                    particleSystem = new particle_system_1.ParticleSystem(layouter, render);\n                    pCenter = new particle_system_1.PVector2(width / 2, height / 2);\n                    offsetPVector = new particle_system_1.PVector2(300, 300);\n                    try {\n                        for (particles_1 = __values(particles), particles_1_1 = particles_1.next(); !particles_1_1.done; particles_1_1 = particles_1.next()) {\n                            particle = particles_1_1.value;\n                            position = particle.position;\n                            escapeDirection = position.subtract(pCenter);\n                            acceleration = escapeDirection\n                                .normalize()\n                                .multiply(0.05 * Math.random());\n                            // 给个总体偏移。。\n                            particle.position = position.add(offsetPVector);\n                            Object.assign(particle, { acceleration: acceleration });\n                            particleSystem.emit(particle);\n                        }\n                    }\n                    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n                    finally {\n                        try {\n                            if (particles_1_1 && !particles_1_1.done && (_b = particles_1.return)) _b.call(particles_1);\n                        }\n                        finally { if (e_1) throw e_1.error; }\n                    }\n                    return [2 /*return*/, particleSystem];\n            }\n        });\n    });\n}\nfunction play(draw) {\n    var MAX_TIME = 10000;\n    var fps = 30, now, then = Date.now(), interval = 1000 / fps, delta, total = 0;\n    function tick() {\n        if (total > MAX_TIME)\n            return;\n        requestAnimationFrame(tick);\n        now = Date.now();\n        delta = now - then;\n        if (delta > interval) {\n            // 这里不能简单then=now，否则还会出现上边简单做法的细微时间差问题。例如fps=10，每帧100ms，而现在每16ms（60fps）执行一次draw。16*7=112>100，需要7次才实际绘制一次。这个情况下，实际10帧需要112*10=1120ms>1000ms才绘制完成。\n            then = now - (delta % interval);\n            draw();\n        }\n        total += interval;\n    }\n    tick();\n}\nfunction go() {\n    return __awaiter(this, void 0, void 0, function () {\n        var particleSystem;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, initSystem()];\n                case 1:\n                    particleSystem = _a.sent();\n                    play(function () {\n                        particleSystem.run();\n                    });\n                    return [2 /*return*/];\n            }\n        });\n    });\n}\ngo();\n\n\n//# sourceURL=webpack:///./src/main.ts?");

/***/ }),

/***/ "./src/particle-system/index.ts":
/*!**************************************!*\
  !*** ./src/particle-system/index.ts ***!
  \**************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PVector2 = exports.ParticleSystem = exports.ParticleRender = exports.ParticleLayouter = exports.Particle = void 0;\nvar pvector2_1 = __webpack_require__(/*! ./pvector2 */ \"./src/particle-system/pvector2.ts\");\nObject.defineProperty(exports, \"PVector2\", { enumerable: true, get: function () { return pvector2_1.PVector2; } });\nvar particle_1 = __webpack_require__(/*! ./particle */ \"./src/particle-system/particle.ts\");\nObject.defineProperty(exports, \"Particle\", { enumerable: true, get: function () { return particle_1.Particle; } });\nvar particle_system_1 = __webpack_require__(/*! ./particle-system */ \"./src/particle-system/particle-system.ts\");\nObject.defineProperty(exports, \"ParticleSystem\", { enumerable: true, get: function () { return particle_system_1.ParticleSystem; } });\nvar particle_render_1 = __webpack_require__(/*! ./particle-render */ \"./src/particle-system/particle-render.ts\");\nObject.defineProperty(exports, \"ParticleRender\", { enumerable: true, get: function () { return particle_render_1.ParticleRender; } });\nvar particle_layouter_1 = __webpack_require__(/*! ./particle-layouter */ \"./src/particle-system/particle-layouter.ts\");\nObject.defineProperty(exports, \"ParticleLayouter\", { enumerable: true, get: function () { return particle_layouter_1.ParticleLayouter; } });\n\n\n//# sourceURL=webpack:///./src/particle-system/index.ts?");

/***/ }),

/***/ "./src/particle-system/particle-layouter.ts":
/*!**************************************************!*\
  !*** ./src/particle-system/particle-layouter.ts ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ParticleLayouter = void 0;\nvar _1 = __webpack_require__(/*! ./ */ \"./src/particle-system/index.ts\");\n/**\n * 布局系统，更新计算每个particle的状态\n */\nvar ParticleLayouter = /** @class */ (function () {\n    function ParticleLayouter() {\n    }\n    // 跟新当前粒子的加速度，速度，位置\b，这个可以抽象出一个策略系统？\n    ParticleLayouter.prototype.updateParticle = function (particle) {\n        var velocity = particle.velocity, position = particle.position, acceleration = particle.acceleration, age = particle.age;\n        var vLen = velocity.len();\n        // 阻力正比于速度的平方 av^2 bv^3;\n        var vPVector = velocity.normalize(); // 速度的方向向量\n        var dAcceleration = _1.PVector2.zero\n            .add(vPVector.multiply(vLen * 0.00001)) // todo 写死的常量\n            .add(vPVector.multiply(vLen * vLen * 0.00005))\n            .add(vPVector.multiply(vLen * vLen * vLen * 0.00005));\n        acceleration = acceleration.subtract(dAcceleration);\n        var newVelocity = velocity.add(acceleration);\n        if (!(velocity.isZero() || newVelocity.normalize().equal(velocity.normalize()))) {\n            particle.isDead = true;\n            return;\n        }\n        position = position.add(newVelocity);\n        age += 1; // todo 这个应该是可以配置的\n        // 注意更新的速度需要时更新后的\n        Object.assign(particle, {\n            velocity: newVelocity,\n            position: position,\n            acceleration: acceleration,\n            age: age,\n        });\n    };\n    // 更新所有粒子位置\n    ParticleLayouter.prototype.update = function (particles) {\n        var e_1, _a;\n        try {\n            for (var particles_1 = __values(particles), particles_1_1 = particles_1.next(); !particles_1_1.done; particles_1_1 = particles_1.next()) {\n                var particle = particles_1_1.value;\n                this.updateParticle(particle);\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (particles_1_1 && !particles_1_1.done && (_a = particles_1.return)) _a.call(particles_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n    };\n    return ParticleLayouter;\n}());\nexports.ParticleLayouter = ParticleLayouter;\n\n\n//# sourceURL=webpack:///./src/particle-system/particle-layouter.ts?");

/***/ }),

/***/ "./src/particle-system/particle-render.ts":
/*!************************************************!*\
  !*** ./src/particle-system/particle-render.ts ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread = (this && this.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));\n    return ar;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ParticleRender = void 0;\n// 记录 particle 与对应 sprite 的映射关系\nvar ParticleRender = /** @class */ (function () {\n    function ParticleRender(selector) {\n        // const canvas = document.createElement('canvas');\n        var canvas = document.getElementById(\"myCanvas\");\n        var ctx = canvas.getContext(\"2d\");\n        this._canvas = canvas;\n        this._ctx = ctx;\n    }\n    ParticleRender.prototype.draw = function (particles) {\n        var e_1, _a;\n        var render = this;\n        var ctx = render._ctx, canvas = render._canvas;\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\n        try {\n            for (var particles_1 = __values(particles), particles_1_1 = particles_1.next(); !particles_1_1.done; particles_1_1 = particles_1.next()) {\n                var particle = particles_1_1.value;\n                var _b = particle.position, x = _b.x, y = _b.y, size = particle.size, color = particle.color;\n                // 1. 获取并粒子正确位置\n                // 2. 更新粒子寿命\n                // 3. 根据寿命，计算一个 percent\n                // 4. 根据 percent 更新粒子对应的尺寸和，透明度，然后渲染\n                // const percent = ; TODO\n                ctx.fillStyle = \"rgba(\" + color.r + \", \" + color.g + \", \" + color.b + \", \" + color.a + \")\";\n                ctx.fillRect.apply(ctx, __spread([x, y], size.toArray()));\n                // let currSize = this.startSize * this.sizeFunc(percent);\n                // let currOpacity = this.opacityFunc(percent);\n                // ctx.fillStyle = \"rgba(\" + this.rgbArray[0] + ',' + this.rgbArray[1] + ',' + this.rgbArray[2] + ',' + currOpacity + \")\";\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (particles_1_1 && !particles_1_1.done && (_a = particles_1.return)) _a.call(particles_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n    };\n    return ParticleRender;\n}());\nexports.ParticleRender = ParticleRender;\n\n\n//# sourceURL=webpack:///./src/particle-system/particle-render.ts?");

/***/ }),

/***/ "./src/particle-system/particle-system.ts":
/*!************************************************!*\
  !*** ./src/particle-system/particle-system.ts ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ParticleSystem = void 0;\nvar ParticleSystem = /** @class */ (function () {\n    function ParticleSystem(_layouter, _render) {\n        this._layouter = _layouter;\n        this._render = _render;\n        this._particles = [];\n    }\n    // 这里我们可以抽象出一个发射器，用来负责粒子的初始化\n    ParticleSystem.prototype.emit = function (particle) {\n        this._particles.push(particle);\n    };\n    ParticleSystem.prototype.initRun = function () {\n        this._render.draw(this._particles);\n    };\n    // 布局渲染\n    ParticleSystem.prototype.run = function () {\n        this._layouter.update(this._particles);\n        this._removeDeadParticles();\n        this._render.draw(this._particles);\n    };\n    // 移除已经死亡的粒子\n    ParticleSystem.prototype._removeDeadParticles = function () {\n        this._particles = this._particles.filter(function (particle) { return !particle.isDead; });\n    };\n    return ParticleSystem;\n}());\nexports.ParticleSystem = ParticleSystem;\n\n\n//# sourceURL=webpack:///./src/particle-system/particle-system.ts?");

/***/ }),

/***/ "./src/particle-system/particle.ts":
/*!*****************************************!*\
  !*** ./src/particle-system/particle.ts ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Particle = void 0;\nvar pvector2_1 = __webpack_require__(/*! ./pvector2 */ \"./src/particle-system/pvector2.ts\");\nvar zeroPVector = pvector2_1.PVector2.zero;\nvar Particle = /** @class */ (function () {\n    function Particle(position, size, acceleration, velocity) {\n        if (acceleration === void 0) { acceleration = zeroPVector; }\n        if (velocity === void 0) { velocity = zeroPVector; }\n        this.position = position;\n        this.size = size;\n        this.acceleration = acceleration;\n        this.velocity = velocity;\n        this.age = 0;\n        this.isDead = false;\n    }\n    return Particle;\n}());\nexports.Particle = Particle;\n\n\n//# sourceURL=webpack:///./src/particle-system/particle.ts?");

/***/ }),

/***/ "./src/particle-system/pvector2.ts":
/*!*****************************************!*\
  !*** ./src/particle-system/pvector2.ts ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PVector2 = void 0;\nfunction numTrim(x) {\n    return Number(x.toPrecision(3));\n}\n/**\n * 二维空间上的向量\n */\nvar PVector2 = /** @class */ (function () {\n    function PVector2(x, y) {\n        this.x = x;\n        this.y = y;\n    }\n    PVector2.prototype.clone = function () {\n        return new PVector2(this.x, this.y);\n    };\n    PVector2.prototype.equal = function (p) {\n        var _a = this, x = _a.x, y = _a.y;\n        return numTrim(x) === numTrim(p.x) && numTrim(y) === numTrim(p.y);\n    };\n    PVector2.prototype.add = function (p) {\n        var _a = this, x1 = _a.x, y1 = _a.y;\n        var x2 = p.x, y2 = p.y;\n        return new PVector2(x1 + x2, y1 + y2);\n    };\n    PVector2.prototype.subtract = function (p) {\n        return new PVector2(this.x - p.x, this.y - p.y);\n    };\n    PVector2.prototype.multiply = function (f) {\n        return new PVector2(this.x * f, this.y * f);\n    };\n    PVector2.prototype.divide = function (f) {\n        var invf = 1 / f;\n        return new PVector2(this.x * invf, this.y * invf);\n    };\n    PVector2.prototype.dot = function (p) {\n        return this.x * p.x + this.y * p.y;\n    };\n    PVector2.prototype.negate = function () {\n        return new PVector2(-this.x, -this.y);\n    };\n    PVector2.prototype.normalize = function () {\n        var _a = this, x = _a.x, y = _a.y;\n        var len = this.len();\n        if (0 === len)\n            return this; // 0向量返回自身\n        return new PVector2(x / len, y / len);\n    };\n    // 向量长度\n    PVector2.prototype.len = function () {\n        var _a = this, x = _a.x, y = _a.y;\n        return Math.sqrt(x * x + y * y);\n    };\n    PVector2.prototype.zero = function () {\n        return PVector2.zero;\n    };\n    PVector2.prototype.isZero = function () {\n        var _a = this, x = _a.x, y = _a.y;\n        return x === 0 && y === 0;\n    };\n    PVector2.prototype.toArray = function () {\n        return [this.x, this.y];\n    };\n    PVector2.zero = new PVector2(0, 0);\n    return PVector2;\n}());\nexports.PVector2 = PVector2;\n\n\n//# sourceURL=webpack:///./src/particle-system/pvector2.ts?");

/***/ }),

/***/ "./src/utils.ts":
/*!**********************!*\
  !*** ./src/utils.ts ***!
  \**********************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.chunk = exports.isNumber = void 0;\nfunction isNumber(x) {\n    return 'number' === typeof x;\n}\nexports.isNumber = isNumber;\nfunction chunk(arr, len) {\n    var chunks = [], i = 0, n = arr.length;\n    while (i < n) {\n        chunks.push(arr.slice(i, i += len));\n    }\n    return chunks;\n}\nexports.chunk = chunk;\n\n\n//# sourceURL=webpack:///./src/utils.ts?");

/***/ })

/******/ });